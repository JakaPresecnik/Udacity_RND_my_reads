(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{18:function(e,t,a){e.exports=a(30)},23:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var s=a(0),o=a.n(s),l=a(15),r=a.n(l),n=(a(23),e=>o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:e.book.shelf||"none",onChange:t=>e.updateShelfs(t,e.book)},o.a.createElement("optgroup",{label:"Move to..."},o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))));class c extends s.Component{render(){var e=this.props,t=e.shelf,a=e.updateShelfs,s=e.books;return o.a.createElement("ol",{className:"books-grid"},s.filter(e=>e.shelf===t.id).map(e=>o.a.createElement("li",{key:e.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),o.a.createElement(n,{updateShelfs:a,shelf:t,book:e})),o.a.createElement("div",{className:"book-title"},o.a.createElement("h4",null,e.title)),o.a.createElement("div",{className:"book-authors"},e.authors.map(e=>o.a.createElement("p",{key:e},e)))))))}}var i=c,h=a(6),m=e=>o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,e.shelfs.map(t=>o.a.createElement("div",{className:"bookshelf",key:t.id},o.a.createElement("h2",{className:"bookshelf-title"},t.text),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement(i,{updateShelfs:e.updateShelfs,shelf:t,books:e.books})))))),o.a.createElement("div",{className:"open-search"},o.a.createElement(h.b,{className:"button",to:"/my-reads/search"},"Search Books")));class d extends s.Component{render(){return o.a.createElement("ol",{className:"books-grid"},this.props.books.map(e=>o.a.createElement("li",{key:e.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},null!=e.imageLinks&&o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),o.a.createElement(n,{updateShelfs:this.props.updateShelfs,book:e})),o.a.createElement("div",{className:"search-book-title"},o.a.createElement("h4",null,e.title),o.a.createElement("h6",null,e.subtitle)),Array.isArray(e.authors)&&null!=e.authors&&o.a.createElement("div",{className:"book-authors"},e.authors.map(e=>o.a.createElement("p",{key:e},e)))))))}}var u=d,p=()=>o.a.createElement("div",{className:"no-items"},o.a.createElement("p",null,"Try something else in the search bar...."));class b extends s.Component{render(){var e=this.props,t=e.books,a=e.query,s=e.updateQuery;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(h.b,{className:"close-search",to:"/my-reads/"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:a,onChange:e=>s(e)}))),o.a.createElement("div",{className:"search-books-results"},Array.isArray(t)?o.a.createElement(u,{books:t,updateShelfs:this.props.updateShelfs}):o.a.createElement(p,null)))}}var k=b,E=a(5),v=a(9),y="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var g={Accept:"application/json",Authorization:f},N=(e,t)=>fetch("".concat(y,"/books/").concat(e.id),{method:"PUT",headers:Object(v.a)(Object(v.a)({},g),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(e=>e.json());class S extends o.a.Component{constructor(...e){super(...e),this.state={shelfs:[{id:"currentlyReading",text:"Currently Reading"},{id:"wantToRead",text:"Want to Read"},{id:"read",text:"Read"}],books:[],allBooks:[],query:""},this.updateQuery=e=>{this.setState({query:e.target.value.split(/\s+/).join(" ")})},this.updateShelfs=(e,t)=>{N(t,e.target.value);var a=this.state.books.indexOf(t);if("none"===e.target.value){var s=Object.assign({},this.state);s.books=s.books!==s.books.splice(a,1)&&s.books,this.setState(s)}else{var o=Object.assign({},this.state);o.books[a].shelf=e.target.value,this.setState(o)}},this.addToBooks=(e,t)=>{var a=this.state.allBooks.indexOf(t),s=Object.assign({},this.state);if(s.allBooks[a].shelf=e.target.value,this.state.books.includes(t)){var o=this.state.books.indexOf(t);Object.assign({},this.state).books[o].shelf=e.target.value}else s.books.push(t);this.setState({copyBooks:s}),N(t,e.target.value)}}componentDidMount(){fetch("".concat(y,"/books"),{headers:g}).then(e=>e.json()).then(e=>e.books).then(e=>{this.setState({books:e})})}componentDidUpdate(e,t){var a;this.state.query!==t.query&&(a=this.state.query,fetch("".concat(y,"/search"),{method:"POST",headers:Object(v.a)(Object(v.a)({},g),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:a})}).then(e=>e.json()).then(e=>e.books)).then(e=>{Array.isArray(e)&&this.state.books.map(t=>{e.map(e=>{e.id===t.id&&(e.shelf=t.shelf)})}),this.setState({allBooks:e})})}render(){return o.a.createElement("div",{className:"app"},o.a.createElement(E.a,{exact:!0,path:"/my-reads/",render:()=>o.a.createElement(m,{shelfs:this.state.shelfs,books:this.state.books,updateShelfs:this.updateShelfs})}),o.a.createElement(E.a,{exact:!0,path:"/my-reads/search",render:()=>o.a.createElement(k,{updateShelfs:this.addToBooks,books:this.state.allBooks,query:this.state.query,updateQuery:this.updateQuery})}))}}var j=S;a(29);r.a.render(o.a.createElement(h.a,null,o.a.createElement(j,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.d6b487c2.chunk.js.map